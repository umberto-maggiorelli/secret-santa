<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />
    <title>Stlite app</title>
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/@stlite/browser@0.89.1/build/stlite.css"
    />
  </head>
  <body>
    <div id="root"></div>
    <script type="module">
import { mount } from "https://cdn.jsdelivr.net/npm/@stlite/browser@0.89.1/build/stlite.js"
mount(
  {
    requirements: [],
    entrypoint: "streamlit_app.py",
    files: {
"streamlit_app.py": `import math
from random import shuffle

import streamlit as st

PSW = "0O,#36If'7"

VIP_PEOPLE = [
    "Andrea Maccagni",
    "Greta Mazza",
]

PEOPLE = [
    "Umberto Maggiorelli",
    "Alberto Ugolotti",
    "Andrea Cocchi",
    "Andrea D'Onghia",
    "Carlotta Zamagni",
    "Diego Zamagni",
    "Edoardo Giuberti",
    "Lorenzo Zaniboni",
    "Luca Poletti",
    "Martina Montani",
    "Matteo Pizzamiglio",
    "Sara Fabbri",
    "Sofia Lanzi",
    "Veronica Maestri",
]

if "passcode" not in st.session_state:
    st.session_state.passcode = ""

if "people" not in st.session_state:
    shuffle(PEOPLE)
    st.session_state.people = VIP_PEOPLE + PEOPLE

if "grid" not in st.session_state:
    grid_shuffled = VIP_PEOPLE.copy() + PEOPLE.copy()
    shuffle(grid_shuffled)
    st.session_state.grid = grid_shuffled


st.title("🎅🏻 Secret Santa 2025 🎅🏻")


def on_click_button(key: str) -> None:
    n_people = len(st.session_state.people)
    idx = st.session_state.people.index(key)
    present_to = st.session_state.people[(idx + 1) % n_people]
    st.info(f"{key} devi fare il regalo a: **{present_to}**")


if st.session_state.passcode != PSW:
    if st.session_state.passcode == "":
        st.warning("Inserisci il passcode per accedere all'applicazione!")
    else:
        st.error("Il passcode inserito è errato, riprova")
    psw = st.text_input(
        label="Passcode",
        type="password",
        help="Per accedere al Secret Santa 2025 utilizza la password fornita dall'amministratore",
        placeholder="Inserisci il passcode",
        icon=":material/passkey:"
    ) # type: ignore
    st.session_state.passcode = psw
    st.rerun()

all_people = st.session_state.grid

your_name = st.selectbox(
    label="Chi sei?",
    options=all_people,
    index=None,
)
if your_name:
    n_cols = 3
    n_rows = math.ceil(len(all_people) / n_cols)

    for n in range(0, n_rows + 1):
        cols = st.columns(n_cols)
        for i, col in enumerate(cols):
            profile_number = (n * n_cols) + i
            if profile_number >= len(all_people):
                continue
            name = all_people[profile_number]
            col.button(
                label=name,
                key=name,
                icon=":material/emoji_people:",
                width="stretch",
                on_click=on_click_button,
                args=(name,),
                disabled=True if your_name != name else False
            )

`,

},
  },
  document.getElementById("root")
)

    </script>
  </body>
  <!-- Generated from Stlite Sharing (https://edit.share.stlite.net/), and the source version is 91d910f343d2955b8e2e0140d9383337861dd54a -->
</html>